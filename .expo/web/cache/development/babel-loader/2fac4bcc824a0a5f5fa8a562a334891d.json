{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Ship_identification\\\\src\\\\main\\\\searchMap\\\\index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { StatusBar } from 'expo-status-bar';\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport * as base from 'native-base';\nimport * as Location from 'expo-location';\nimport MapView, { Marker, Callout, PROVIDER_GOOGLE } from 'react-native-maps';\nimport { Svg, Image } from 'react-native-svg';\nimport { getToken } from \"../../utils/getToken\";\nimport { searchWastedShipList } from \"../../utils/shipInfoRequest\";\n\nvar SearchMap = function (_Component) {\n  _inherits(SearchMap, _Component);\n\n  var _super = _createSuper(SearchMap);\n\n  function SearchMap(props) {\n    var _this;\n\n    _classCallCheck(this, SearchMap);\n\n    _this = _super.call(this, props);\n\n    _this.moveCurrentLocation = function _callee() {\n      var response, location, loc;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Location.requestPermissionsAsync());\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync());\n\n            case 5:\n              location = _context.sent;\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(_this.setState({\n                latitude: location.coords['latitude'],\n                longitude: location.coords['longitude']\n              }));\n\n            case 8:\n              loc = {\n                latitude: _this.state.latitude,\n                longitude: _this.state.longitude,\n                latitudeDelta: 0.05,\n                longitudeDelta: 0.05\n              };\n\n              _this.mapView.animateToRegion(loc, 0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.getLocation = function _callee2() {\n      var response, location;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(Location.requestPermissionsAsync());\n\n            case 3:\n              response = _context2.sent;\n              _context2.next = 6;\n              return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync());\n\n            case 6:\n              location = _context2.sent;\n              _context2.next = 9;\n              return _regeneratorRuntime.awrap(_this.setState({\n                latitude: location.coords['latitude'],\n                longitude: location.coords['longitude']\n              }));\n\n            case 9:\n              _context2.next = 14;\n              break;\n\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](0);\n              Alert.alert(\"Can't find you.\", \"Please Try Again!\");\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[0, 11]], Promise);\n    };\n\n    _this.state = {\n      latitude: '35.098655',\n      longitude: '129.074161',\n      data: [],\n      searchIMO: ''\n    };\n    _this.requestShipLocation = _this.requestShipLocation(_assertThisInitialized(_this));\n    _this.getLocation = _this.getLocation(_assertThisInitialized(_this));\n    _this.moveCurrentLocation = _this.moveCurrentLocation.bind(_assertThisInitialized(_this));\n    _this.moveLocation = _this.moveLocation.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(SearchMap, [{\n    key: \"requestShipLocation\",\n    value: function requestShipLocation() {\n      var _this2 = this;\n\n      getToken().then(function (token) {\n        searchWastedShipList(token).then(function (response) {\n          if (response.status == 200) {\n            _this2.setState({\n              data: _this2.state.data.concat(response.data.data)\n            });\n          } else {\n            console.log('fail');\n          }\n        }).catch(function (error) {\n          console.log(error.message);\n        });\n      });\n    }\n  }, {\n    key: \"moveLocation\",\n    value: function moveLocation() {\n      var loc = {\n        latitude: '35.118347',\n        longitude: '129.047641',\n        latitudeDelta: 0.05,\n        longitudeDelta: 0.05\n      };\n      this.mapView.animateToRegion(loc, 0);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (this.state.data == '' || this.state.latitude == '' || this.state.longitude == '') {\n        return React.createElement(View, {\n          style: {\n            alignItems: 'center',\n            justifyContent: 'center',\n            flex: 1\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 30\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 9\n          }\n        }, \"\\uB370\\uC774\\uD130 \\uAC00\\uC838\\uC624\\uB294 \\uC911\"), React.createElement(base.Spinner, {\n          color: \"blue\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 9\n          }\n        }));\n      }\n\n      var requestMarker = function requestMarker(data) {\n        return data.map(function (ship) {\n          return React.createElement(Marker, {\n            coordinate: {\n              latitude: parseFloat(ship.latitude),\n              longitude: parseFloat(ship.longitude)\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 6\n            }\n          }, React.createElement(Callout, {\n            onPress: function onPress() {\n              return _this3.props.navigation.navigate('DetailWastedShip', {\n                id: ship.id\n              });\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 7\n            }\n          }, React.createElement(View, {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 8\n            }\n          }, React.createElement(Svg, {\n            width: 300,\n            height: 200,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 9\n            }\n          }, React.createElement(Image, {\n            width: '100%',\n            height: '100%',\n            href: {\n              uri: 'https://shipcheck-server-vrxqx.run.goorm.io' + ship.wasted_img\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 10\n            }\n          })), React.createElement(base.Card, {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 9\n            }\n          }, React.createElement(Text, {\n            style: {\n              fontFamily: 'Nanum'\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 10\n            }\n          }, \"IMO : \", ship.title), React.createElement(Text, {\n            style: {\n              fontFamily: 'Nanum'\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 10\n            }\n          }, \"\\uC704\\uB3C4 : \", ship.latitude), React.createElement(Text, {\n            style: {\n              fontFamily: 'Nanum'\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 10\n            }\n          }, \"\\uACBD\\uB3C4 : \", ship.longitude)))));\n        });\n      };\n\n      return React.createElement(base.Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 4\n        }\n      }, React.createElement(base.Header, {\n        style: {\n          backgroundColor: '#006eee'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 5\n        }\n      }, React.createElement(base.Left, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 6\n        }\n      }, React.createElement(base.Button, {\n        transparent: true,\n        onPress: function onPress() {\n          return _this3.props.navigation.goBack();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 7\n        }\n      }, React.createElement(base.Icon, {\n        name: \"arrow-back\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 8\n        }\n      }))), React.createElement(base.Right, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 6\n        }\n      }, React.createElement(base.Title, {\n        style: {\n          fontFamily: 'Nanum_Title',\n          fontSize: 20\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 7\n        }\n      }, \"\\uC720\\uAE30\\uC120\\uBC15 \\uBC0F \\uD3D0\\uC120\\uBC15 \\uC9C0\\uB3C4 \\uAC80\\uC0C9\"))), React.createElement(base.Content, {\n        contentContainerStyle: {\n          flex: 1\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 5\n        }\n      }, React.createElement(base.Form, {\n        style: {\n          flex: 1\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 6\n        }\n      }, React.createElement(MapView, {\n        ref: function ref(_ref) {\n          return _this3.mapView = _ref;\n        },\n        provider: PROVIDER_GOOGLE,\n        style: {\n          flex: 1\n        },\n        initialRegion: {\n          latitude: parseFloat(this.state.latitude),\n          longitude: parseFloat(this.state.longitude),\n          latitudeDelta: 0.05,\n          longitudeDelta: 0.05\n        },\n        mapType: 'satellite',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 7\n        }\n      }, requestMarker(this.state.data))), React.createElement(base.Button, {\n        rounded: true,\n        style: {\n          position: 'absolute',\n          top: '5%',\n          left: '5%',\n          backgroundColor: '#006eee',\n          height: 55,\n          width: 55,\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        onPress: this.moveCurrentLocation,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 6\n        }\n      }, React.createElement(base.Icon, {\n        name: \"ios-locate\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 7\n        }\n      }))));\n    }\n  }]);\n\n  return SearchMap;\n}(Component);\n\nexport { SearchMap as default };","map":{"version":3,"sources":["C:/Users/User/Desktop/Ship_identification/src/main/searchMap/index.js"],"names":["StatusBar","React","Component","base","Location","MapView","Marker","Callout","PROVIDER_GOOGLE","Svg","Image","getToken","searchWastedShipList","SearchMap","props","moveCurrentLocation","requestPermissionsAsync","response","getCurrentPositionAsync","location","setState","latitude","coords","longitude","loc","state","latitudeDelta","longitudeDelta","mapView","animateToRegion","getLocation","Alert","alert","data","searchIMO","requestShipLocation","bind","moveLocation","then","token","status","concat","console","log","catch","error","message","alignItems","justifyContent","flex","fontSize","requestMarker","map","ship","parseFloat","navigation","navigate","id","uri","wasted_img","fontFamily","title","backgroundColor","goBack","ref","position","top","left","height","width"],"mappings":"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","sourcesContent":["import { StatusBar } from 'expo-status-bar';\nimport React, { Component } from 'react';\nimport { View, Text } from 'react-native';\nimport * as base from 'native-base';\nimport * as Location from 'expo-location';\nimport MapView, { Marker, Callout, PROVIDER_GOOGLE } from 'react-native-maps';\nimport { Svg, Image } from 'react-native-svg';\nimport { getToken } from '../../utils/getToken';\nimport { searchWastedShipList } from '../../utils/shipInfoRequest';\nexport default class SearchMap extends Component{ // only use for Wasted Boat\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tlatitude: '35.098655',\n\t\t\tlongitude: '129.074161',\n\t\t\t// 35.098655\n\t\t\t// 129.074161\n\t\t\tdata: [],\n\t\t\tsearchIMO: '',\n\t\t};\n\t\tthis.requestShipLocation = this.requestShipLocation(this);\n\t\tthis.getLocation = this.getLocation(this);\n\t\tthis.moveCurrentLocation = this.moveCurrentLocation.bind(this);\n\t\tthis.moveLocation = this.moveLocation.bind(this);\n\t}\n\trequestShipLocation(){\n\t\tgetToken().then((token) => {\n\t\t\tsearchWastedShipList(token).then((response) =>{\n\t\t\t\tif(response.status == 200){ // request success\n\t\t\t\t\tthis.setState({data: this.state.data.concat(response.data.data)})\n\t\t\t\t}\n\t\t\t\telse{\n                console.log('fail')\n            \t}\n\t\t\t}).catch((error) => { // request fail\n\t\t\t\t\tconsole.log(error.message)\n\t\t\t\t})\n        })\n\t}\n\tmoveLocation(){\n\t\tlet loc = {\n\t\t\tlatitude: '35.118347',\n\t\t\tlongitude: '129.047641',\n\t\t\tlatitudeDelta: 0.05,\n\t\t\tlongitudeDelta: 0.05,\n\t\t};\n\t\tthis.mapView.animateToRegion(loc, 0);\n\t}\n\t\n\tmoveCurrentLocation = async () => {\n\t\tconst response = await Location.requestPermissionsAsync();\n\t\tconst location = await Location.getCurrentPositionAsync();\n\t\tawait this.setState({latitude: location.coords['latitude'], longitude: location.coords['longitude']})\n\t\tlet loc = {\n\t\t\tlatitude: this.state.latitude,\n\t\t\tlongitude: this.state.longitude,\n\t\t\tlatitudeDelta: 0.05,\n\t\t\tlongitudeDelta: 0.05,\n\t\t};\n\t\tthis.mapView.animateToRegion(loc, 0);\n\t}\n\t\n\tgetLocation = async () => {\n\t\ttry {\n\t\t\tconst response = await Location.requestPermissionsAsync();\n\t\t\tconst location = await Location.getCurrentPositionAsync();\n\t\t\tawait this.setState({latitude: location.coords['latitude'], longitude: location.coords['longitude']})\n\t\t} catch (error) {\n\t\t  Alert.alert(\"Can't find you.\", \"Please Try Again!\")\n\t\t}\n\t}\n\trender(){\n\t\tif(this.state.data == '' || this.state.latitude == '' || this.state.longitude == ''){\n            return(\n                <View style={{alignItems:'center', justifyContent: 'center', flex: 1}}>\n\t\t\t\t    <Text style ={{fontSize: 30}}>데이터 가져오는 중</Text>\n\t\t\t\t    <base.Spinner color='blue' />\n                </View>\n            )\n        }\n\t\tconst requestMarker = (data) => {\n\t\t\treturn data.map((ship) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Marker\n\t\t\t\t\tcoordinate={{\n\t\t\t\t\t\tlatitude: parseFloat(ship.latitude),\n\t\t\t\t\t\tlongitude: parseFloat(ship.longitude),\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<Callout\n\t\t\t\t\t\t\tonPress={() => this.props.navigation.navigate('DetailWastedShip', {id: ship.id})}>\n\t\t\t\t\t\t\t<View>\n\t\t\t\t\t\t\t\t<Svg width={300} height={200}>\n\t\t\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\t\t\twidth={'100%'}\n\t\t\t\t\t\t\t\t\t\theight={'100%'}\n\t\t\t\t\t\t\t\t\t\thref={{uri:'https://shipcheck-server-vrxqx.run.goorm.io' + ship.wasted_img}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Svg>\n\t\t\t\t\t\t\t\t<base.Card>\n\t\t\t\t\t\t\t\t\t<Text style={{fontFamily:'Nanum',}}>IMO : {ship.title}</Text>\n\t\t\t\t\t\t\t\t\t<Text style={{fontFamily:'Nanum',}}>위도 : {ship.latitude}</Text>\n\t\t\t\t\t\t\t\t\t<Text style={{fontFamily:'Nanum',}}>경도 : {ship.longitude}</Text>\n\t\t\t\t\t\t\t\t</base.Card>\n\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t</Callout>\n\t\t\t\t\t</Marker>\n\t\t\t\t)\n\t\t\t})\n\t\t}\n\t\treturn(\n\t\t\t<base.Container>\n\t\t\t\t<base.Header style={{backgroundColor: '#006eee'}}>\n\t\t\t\t\t<base.Left>\n\t\t\t\t\t\t<base.Button transparent onPress={()=>this.props.navigation.goBack()}>\n\t\t\t\t\t\t\t<base.Icon name='arrow-back'/>\n\t\t\t\t\t\t</base.Button>\n\t\t\t\t\t</base.Left>\n\t\t\t\t\t<base.Right>\n\t\t\t\t\t\t<base.Title style={{fontFamily:'Nanum_Title', fontSize: 20}}>유기선박 및 폐선박 지도 검색</base.Title>\n\t\t\t\t\t</base.Right>\n\t\t\t\t</base.Header>\n\t\t\t\t<base.Content contentContainerStyle={{ flex: 1 }}>\n\t\t\t\t\t<base.Form style={{flex: 1,}}>\n\t\t\t\t\t\t<MapView\n\t\t\t\t\t\t\tref = {(ref) => this.mapView=ref}\n\t\t\t\t\t\t\tprovider={PROVIDER_GOOGLE}\n\t\t\t\t\t\t\tstyle={{flex: 1}}\n\t\t\t\t\t\t\tinitialRegion={{\n\t\t\t\t\t\t\t\tlatitude: parseFloat(this.state.latitude),\n\t\t\t\t\t\t\t\tlongitude: parseFloat(this.state.longitude),\n\t\t\t\t\t\t\t\tlatitudeDelta: 0.05,\n\t\t\t\t\t\t\t\tlongitudeDelta: 0.05,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tmapType={'satellite'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ requestMarker(this.state.data) }\n\t\t\t\t\t\t</MapView>\n\t\t\t\t\t</base.Form>\n\t\t\t\t\t<base.Button rounded\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\ttop: '5%', left: '5%',\n\t\t\t\t\t\t\tbackgroundColor: '#006eee',\n\t\t\t\t\t\t\theight: 55, width: 55,\n\t\t\t\t\t\t\t\talignItems:'center', justifyContent:'center'}}\n\t\t\t\t\t\tonPress={this.moveCurrentLocation}>\n\t\t\t\t\t\t<base.Icon name='ios-locate'/>\n\t\t\t\t\t</base.Button>\n\t\t\t\t</base.Content>\n\t\t\t</base.Container>\n\t\t);\n\t}\n}"]},"metadata":{},"sourceType":"module"}